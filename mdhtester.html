<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MDH TESTER ‚Äî Universal API Key Tester by MDHojayfa</title>
    <meta name="description" content="Test & validate 70+ API keys instantly. Free universal API key tester by MDHojayfa.">
    <meta property="og:title" content="MDH TESTER ‚Äî Universal API Key Tester">
    <meta property="og:description" content="Test & validate 70+ API keys instantly. Free tool by MDHojayfa.">
    <meta property="og:url" content="https://mdhojayfa.github.io/mdhtester.html">
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600&family=Outfit:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --accent: #8b5cf6;
            --accent2: #6366f1;
            --bg: #06060e;
            --card: rgba(12, 12, 24, 0.85);
            --border: rgba(255,255,255,0.06);
        }
        * { font-family: 'Outfit', 'Inter', sans-serif; box-sizing: border-box; }
        code, .mono { font-family: 'JetBrains Mono', monospace; }
        html { scroll-behavior: smooth; }
        body { background: var(--bg); min-height: 100vh; overflow-x: hidden; }

        /* Animated Gradient Background */
        .bg-animated {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; pointer-events: none;
        }
        .bg-animated::before {
            content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%;
            background: radial-gradient(ellipse at 30% 20%, rgba(139,92,246,0.08) 0%, transparent 50%),
                        radial-gradient(ellipse at 70% 80%, rgba(59,130,246,0.06) 0%, transparent 50%),
                        radial-gradient(ellipse at 50% 50%, rgba(99,102,241,0.04) 0%, transparent 60%);
            animation: bgShift 20s ease-in-out infinite alternate;
        }
        @keyframes bgShift {
            0% { transform: translate(0, 0) rotate(0deg); }
            50% { transform: translate(-3%, 2%) rotate(1deg); }
            100% { transform: translate(2%, -1%) rotate(-1deg); }
        }
        .bg-grid {
            background-image: linear-gradient(rgba(255,255,255,0.02) 1px, transparent 1px),
                              linear-gradient(90deg, rgba(255,255,255,0.02) 1px, transparent 1px);
            background-size: 50px 50px;
        }
        .bg-noise {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; pointer-events: none;
            opacity: 0.015;
            background: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
        }

        /* Cards */
        .glass-card {
            background: var(--card);
            backdrop-filter: blur(20px) saturate(1.2);
            border: 1px solid var(--border);
            border-radius: 16px;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .glass-card:hover {
            border-color: rgba(139, 92, 246, 0.25);
            box-shadow: 0 8px 40px rgba(139, 92, 246, 0.06);
            transform: translateY(-2px);
        }

        /* Glows */
        .glow-green { box-shadow: 0 0 20px rgba(34,197,94,0.2), 0 0 60px rgba(34,197,94,0.05); border-color: rgba(34,197,94,0.4) !important; }
        .glow-red { box-shadow: 0 0 20px rgba(239,68,68,0.2), 0 0 60px rgba(239,68,68,0.05); border-color: rgba(239,68,68,0.4) !important; }
        .glow-yellow { box-shadow: 0 0 20px rgba(234,179,8,0.2), 0 0 60px rgba(234,179,8,0.05); border-color: rgba(234,179,8,0.4) !important; }

        /* Buttons */
        .btn-primary {
            background: linear-gradient(135deg, #8b5cf6 0%, #6366f1 50%, #8b5cf6 100%);
            background-size: 200% auto;
            transition: all 0.4s ease;
            position: relative; overflow: hidden;
        }
        .btn-primary::before {
            content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.15), transparent);
            transition: left 0.6s ease;
        }
        .btn-primary:hover::before { left: 100%; }
        .btn-primary:hover {
            background-position: right center;
            box-shadow: 0 4px 30px rgba(139,92,246,0.4), 0 0 60px rgba(139,92,246,0.15);
            transform: translateY(-2px);
        }
        .btn-primary:active { transform: translateY(0); }

        .btn-ghost {
            background: rgba(255,255,255,0.03);
            border: 1px solid rgba(255,255,255,0.08);
            transition: all 0.3s ease;
        }
        .btn-ghost:hover {
            background: rgba(255,255,255,0.06);
            border-color: rgba(139,92,246,0.3);
        }

        /* Inputs */
        .input-dark {
            background: rgba(8, 8, 18, 0.9);
            border: 1px solid rgba(255,255,255,0.08);
            color: #e2e8f0;
            transition: all 0.3s ease;
            border-radius: 12px;
        }
        .input-dark:focus {
            border-color: rgba(139,92,246,0.5);
            box-shadow: 0 0 0 3px rgba(139,92,246,0.1), 0 0 20px rgba(139,92,246,0.1);
            outline: none;
        }
        .input-dark::placeholder { color: rgba(148,163,184,0.4); }

        /* Chips */
        .chip {
            cursor: pointer; transition: all 0.3s ease; user-select: none;
            border-radius: 10px; font-weight: 500;
        }
        .chip:hover { background: rgba(139,92,246,0.15) !important; border-color: rgba(139,92,246,0.3) !important; }
        .chip.active {
            background: rgba(139,92,246,0.25) !important;
            border-color: rgba(139,92,246,0.5) !important;
            color: #c4b5fd !important;
            box-shadow: 0 0 15px rgba(139,92,246,0.15);
        }

        /* Loader */
        .loader { width: 22px; height: 22px; border: 2.5px solid rgba(255,255,255,0.15); border-top-color: #a78bfa; border-radius: 50%; animation: spin 0.7s linear infinite; display: inline-block; }
        @keyframes spin { to { transform: rotate(360deg); } }

        /* Pulse ring */
        .pulse-ring { position: relative; }
        .pulse-ring::after {
            content: ''; position: absolute; inset: -4px; border-radius: inherit;
            border: 2px solid rgba(139,92,246,0.3);
            animation: pulseRing 2s ease-out infinite;
        }
        @keyframes pulseRing { 0% { opacity: 1; transform: scale(1); } 100% { opacity: 0; transform: scale(1.15); } }

        /* Gradient text */
        .text-gradient {
            background: linear-gradient(135deg, #c084fc 0%, #818cf8 30%, #60a5fa 60%, #c084fc 100%);
            background-size: 300% auto;
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            animation: shimmer 4s linear infinite;
        }
        @keyframes shimmer { 0% { background-position: 0% center; } 100% { background-position: 300% center; } }

        /* Result box */
        .result-box {
            background: rgba(6,6,14,0.95); border: 1px solid rgba(255,255,255,0.06);
            max-height: 220px; overflow-y: auto; border-radius: 12px;
        }
        .result-box::-webkit-scrollbar { width: 4px; }
        .result-box::-webkit-scrollbar-track { background: transparent; }
        .result-box::-webkit-scrollbar-thumb { background: rgba(139,92,246,0.3); border-radius: 4px; }

        /* Service card */
        .service-card {
            background: rgba(12,12,24,0.7);
            border: 1px solid rgba(255,255,255,0.05);
            border-radius: 14px;
            transition: all 0.35s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
        }
        .service-card:hover {
            border-color: rgba(139,92,246,0.35);
            background: rgba(139,92,246,0.06);
            box-shadow: 0 4px 20px rgba(139,92,246,0.08);
            transform: translateY(-3px) scale(1.02);
        }
        .service-card:active { transform: translateY(0) scale(0.98); }

        /* Stat card */
        .stat-card {
            background: linear-gradient(145deg, rgba(12,12,24,0.95), rgba(18,18,35,0.9));
            border: 1px solid rgba(255,255,255,0.05);
            border-radius: 16px;
            position: relative; overflow: hidden;
        }
        .stat-card::before {
            content: ''; position: absolute; top: 0; left: 0; right: 0; height: 2px;
            background: linear-gradient(90deg, transparent, var(--stat-color, #8b5cf6), transparent);
            opacity: 0.6;
        }

        /* Toast */
        .toast {
            position: fixed; bottom: 24px; left: 50%; transform: translateX(-50%) translateY(100px);
            z-index: 9999; transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.5s ease;
            opacity: 0; pointer-events: none;
        }
        .toast.show { transform: translateX(-50%) translateY(0); opacity: 1; pointer-events: auto; }

        /* Share modal */
        .modal-overlay {
            position: fixed; inset: 0; background: rgba(0,0,0,0.6); backdrop-filter: blur(8px);
            z-index: 100; display: flex; align-items: center; justify-content: center;
            opacity: 0; pointer-events: none; transition: all 0.3s ease;
        }
        .modal-overlay.active { opacity: 1; pointer-events: auto; }
        .modal-content {
            transform: scale(0.9) translateY(20px); transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .modal-overlay.active .modal-content { transform: scale(1) translateY(0); }

        /* History panel */
        .history-panel {
            position: fixed; top: 0; right: 0; height: 100%; width: 100%; max-width: 420px;
            background: rgba(8,8,18,0.98); backdrop-filter: blur(30px);
            border-left: 1px solid rgba(255,255,255,0.06); z-index: 60;
            transform: translateX(100%); transition: transform 0.45s cubic-bezier(0.4, 0, 0.2, 1);
            overflow-y: auto;
        }
        .history-panel.open { transform: translateX(0); }
        .history-panel::-webkit-scrollbar { width: 3px; }
        .history-panel::-webkit-scrollbar-thumb { background: rgba(139,92,246,0.2); border-radius: 3px; }

        .overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.5); z-index: 55; opacity: 0; pointer-events: none; transition: all 0.3s ease; }
        .overlay.active { opacity: 1; pointer-events: auto; }

        /* Floating share */
        .fab {
            position: fixed; bottom: 24px; right: 24px; z-index: 50;
            width: 56px; height: 56px; border-radius: 16px;
            background: linear-gradient(135deg, #8b5cf6, #6366f1);
            box-shadow: 0 4px 20px rgba(139,92,246,0.4);
            display: flex; align-items: center; justify-content: center;
            cursor: pointer; transition: all 0.3s ease;
        }
        .fab:hover { transform: scale(1.1) rotate(5deg); box-shadow: 0 6px 30px rgba(139,92,246,0.5); }
        .fab:active { transform: scale(0.95); }

        /* Responsive helpers */
        @media (max-width: 640px) {
            .hero-title { font-size: 1.75rem !important; }
            .hero-sub { font-size: 0.8rem !important; }
            .fab { bottom: 16px; right: 16px; width: 48px; height: 48px; border-radius: 14px; }
            .stat-card { padding: 10px !important; }
            .stat-card .stat-num { font-size: 1.25rem !important; }
        }

        /* Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: rgba(139,92,246,0.15); border-radius: 6px; }
        ::-webkit-scrollbar-thumb:hover { background: rgba(139,92,246,0.3); }

        /* Appear animation */
        .appear { opacity: 0; transform: translateY(20px); animation: appearIn 0.6s ease forwards; }
        @keyframes appearIn { to { opacity: 1; transform: translateY(0); } }
        .appear-d1 { animation-delay: 0.1s; }
        .appear-d2 { animation-delay: 0.2s; }
        .appear-d3 { animation-delay: 0.3s; }
        .appear-d4 { animation-delay: 0.4s; }

        /* Logo pulse */
        .logo-glow {
            box-shadow: 0 0 20px rgba(139,92,246,0.3), 0 0 40px rgba(139,92,246,0.1);
            animation: logoGlow 3s ease-in-out infinite alternate;
        }
        @keyframes logoGlow {
            0% { box-shadow: 0 0 20px rgba(139,92,246,0.3), 0 0 40px rgba(139,92,246,0.1); }
            100% { box-shadow: 0 0 25px rgba(99,102,241,0.4), 0 0 50px rgba(99,102,241,0.15); }
        }

        .badge-new {
            background: linear-gradient(135deg, #f59e0b, #ef4444);
            font-size: 8px; padding: 1px 5px; border-radius: 6px;
            font-weight: 700; color: white; letter-spacing: 0.5px;
        }
    </style>
</head>
<body class="bg-grid text-gray-200">
    <div class="bg-animated"></div>
    <div class="bg-noise"></div>

    <!-- HEADER -->
    <header class="sticky top-0 z-40 backdrop-blur-xl bg-[rgba(6,6,14,0.8)] border-b border-white/5">
        <div class="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-violet-500 via-indigo-500 to-blue-500 flex items-center justify-center text-white font-black text-sm logo-glow">
                    M
                </div>
                <div>
                    <h1 class="text-lg font-extrabold text-white tracking-tight">MDH TESTER</h1>
                    <p class="text-[10px] text-gray-500 -mt-0.5">by <span class="text-violet-400 font-semibold">MDHojayfa</span></p>
                </div>
            </div>
            <div class="flex items-center gap-2">
                <button onclick="openShare()" class="btn-ghost px-3 py-2 rounded-xl text-xs text-gray-400 hover:text-white flex items-center gap-1.5 hidden sm:flex">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"/></svg>
                    Share
                </button>
                <a href="https://t.me/MDHojayfa_bot" target="_blank"
                   class="btn-ghost px-3 py-2 rounded-xl text-xs text-blue-400 hover:text-blue-300 flex items-center gap-1.5">
                    <svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm5.894 8.221l-1.97 9.28c-.145.658-.537.818-1.084.508l-3-2.21-1.446 1.394c-.14.18-.357.295-.6.295l.213-3.053 5.56-5.023c.242-.213-.054-.334-.373-.121l-6.869 4.326-2.96-.924c-.64-.203-.658-.64.135-.954l11.566-4.458c.538-.196 1.006.128.832.94z"/></svg>
                    <span class="hidden sm:inline">Contact</span>
                </a>
                <button onclick="toggleHistory()" class="btn-ghost px-3 py-2 rounded-xl text-xs text-gray-400 hover:text-white flex items-center gap-1.5">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                    <span class="hidden sm:inline">History</span>
                </button>
            </div>
        </div>
    </header>

    <!-- HERO -->
    <section class="relative overflow-hidden">
        <div class="max-w-6xl mx-auto px-4 pt-10 pb-6 md:pt-16 md:pb-10 text-center">
            <div class="appear">
                <div class="inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-violet-500/10 border border-violet-500/20 text-xs text-violet-300 mb-5">
                    <span class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></span>
                    Free & Open Source Tool
                </div>
            </div>
            <h2 class="hero-title text-4xl md:text-6xl font-black text-gradient mb-4 appear appear-d1 leading-tight">
                Universal API Key Tester
            </h2>
            <p class="hero-sub text-gray-400 text-sm md:text-base max-w-xl mx-auto mb-8 appear appear-d2 leading-relaxed">
                Instantly test & validate API keys for <span class="text-violet-400 font-bold" id="serviceCount">70+</span> services.
                Select a provider, paste your key, and verify in seconds.
            </p>

            <!-- Stats -->
            <div class="grid grid-cols-3 gap-3 max-w-md mx-auto appear appear-d3">
                <div class="stat-card p-4 text-center" style="--stat-color: #8b5cf6;">
                    <div class="stat-num text-2xl md:text-3xl font-black text-violet-400" id="totalTests">0</div>
                    <div class="text-[10px] md:text-xs text-gray-500 font-medium mt-1">Tests Run</div>
                </div>
                <div class="stat-card p-4 text-center" style="--stat-color: #22c55e;">
                    <div class="stat-num text-2xl md:text-3xl font-black text-green-400" id="validCount">0</div>
                    <div class="text-[10px] md:text-xs text-gray-500 font-medium mt-1">Valid Keys</div>
                </div>
                <div class="stat-card p-4 text-center" style="--stat-color: #ef4444;">
                    <div class="stat-num text-2xl md:text-3xl font-black text-red-400" id="invalidCount">0</div>
                    <div class="text-[10px] md:text-xs text-gray-500 font-medium mt-1">Invalid Keys</div>
                </div>
            </div>
        </div>
    </section>

    <!-- MAIN -->
    <main class="max-w-6xl mx-auto px-4 pb-16">

        <!-- Category Filters -->
        <div class="mb-5 appear appear-d4">
            <div class="flex items-center gap-2 mb-3">
                <span class="text-[10px] text-gray-500 uppercase tracking-widest font-bold">Categories</span>
            </div>
            <div class="flex flex-wrap gap-2" id="categoryFilters">
                <div class="chip active px-3 py-1.5 bg-[rgba(20,20,35,0.8)] border border-gray-700/40 text-xs text-gray-400" data-cat="all" onclick="filterCategory('all')">
                    üåê All
                </div>
            </div>
        </div>

        <!-- Search -->
        <div class="mb-6">
            <div class="relative">
                <svg class="w-5 h-5 absolute left-4 top-1/2 -translate-y-1/2 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg>
                <input type="text" id="searchInput" placeholder="Search API providers (e.g. OpenAI, Stripe, GitHub...)" class="w-full input-dark pl-12 pr-4 py-3.5 text-sm" oninput="filterServices()">
                <kbd class="hidden sm:flex absolute right-4 top-1/2 -translate-y-1/2 px-2 py-0.5 rounded-md bg-white/5 border border-white/10 text-[10px] text-gray-500 font-mono items-center gap-1">
                    Ctrl K
                </kbd>
            </div>
        </div>

        <!-- TESTER CARD -->
        <div class="glass-card p-5 md:p-7 mb-6" id="testerCard">
            <div class="flex items-center gap-2 mb-5">
                <div class="w-8 h-8 rounded-lg bg-violet-500/15 flex items-center justify-center">
                    <svg class="w-4 h-4 text-violet-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/></svg>
                </div>
                <h3 class="text-sm font-bold text-white">Test Your API Key</h3>
            </div>
            <div class="grid md:grid-cols-2 gap-4 mb-4">
                <div>
                    <label class="block text-[10px] text-gray-500 uppercase tracking-widest font-bold mb-2">API Provider</label>
                    <select id="apiProvider" class="w-full input-dark px-4 py-3 text-sm" onchange="onProviderChange()">
                        <option value="">‚Äî Select a Provider ‚Äî</option>
                    </select>
                </div>
                <div>
                    <label class="block text-[10px] text-gray-500 uppercase tracking-widest font-bold mb-2">API Key / Token</label>
                    <div class="relative">
                        <input type="password" id="apiKey" placeholder="Paste your API key here..." class="w-full input-dark px-4 py-3 pr-20 text-sm mono">
                        <div class="absolute right-2 top-1/2 -translate-y-1/2 flex items-center gap-1">
                            <button onclick="pasteKey()" class="p-1.5 rounded-lg hover:bg-white/5 text-gray-500 hover:text-gray-300 transition" title="Paste">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/></svg>
                            </button>
                            <button onclick="toggleKeyVis()" class="p-1.5 rounded-lg hover:bg-white/5 text-gray-500 hover:text-gray-300 transition" title="Toggle visibility">
                                <svg id="eyeIcon" class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/></svg>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Extra fields -->
            <div id="extraFields" class="mb-4 hidden">
                <div class="grid md:grid-cols-2 gap-4" id="extraFieldsContainer"></div>
            </div>

            <!-- Provider Info -->
            <div id="providerInfo" class="mb-4 hidden">
                <div class="bg-violet-500/8 border border-violet-500/15 rounded-xl p-3.5 flex items-start gap-2.5">
                    <span class="text-violet-400 text-sm mt-0.5">üí°</span>
                    <p class="text-xs text-gray-400 leading-relaxed" id="providerInfoText"></p>
                </div>
            </div>

            <!-- Test Button -->
            <button id="testBtn" onclick="testApiKey()" class="btn-primary w-full py-3.5 rounded-xl text-white font-bold text-sm flex items-center justify-center gap-2">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/></svg>
                Test API Key
            </button>
        </div>

        <!-- RESULT -->
        <div id="resultCard" class="glass-card p-5 md:p-7 mb-6 hidden">
            <div class="flex items-center justify-between mb-4">
                <div class="flex items-center gap-3">
                    <div id="resultIcon" class="w-11 h-11 rounded-xl flex items-center justify-center text-xl"></div>
                    <div>
                        <h3 id="resultTitle" class="font-bold text-white text-sm"></h3>
                        <p id="resultSubtitle" class="text-[11px] text-gray-500 mt-0.5"></p>
                    </div>
                </div>
                <div class="flex items-center gap-2">
                    <button onclick="copyResult()" class="btn-ghost p-2 rounded-lg text-gray-500 hover:text-white" title="Copy result">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"/></svg>
                    </button>
                    <button onclick="shareResult()" class="btn-ghost p-2 rounded-lg text-gray-500 hover:text-white" title="Share result">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"/></svg>
                    </button>
                </div>
            </div>
            <div id="resultDetails" class="result-box p-4 mono text-xs text-gray-400"></div>
        </div>

        <!-- SERVICE GRID -->
        <div class="mb-4 flex items-center justify-between">
            <h3 class="text-xs font-bold text-gray-500 uppercase tracking-widest">Supported Services</h3>
            <span class="text-[11px] text-gray-600 font-medium" id="visibleCount"></span>
        </div>
        <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3 mb-10" id="serviceGrid"></div>

        <!-- Native Banner Ad -->
        <div class="flex justify-center my-8">
            <script async="async" data-cfasync="false" src="https://pl28281782.effectivegatecpm.com/1ff05805f1f1e254ff63bae30ac5d8e3/invoke.js"></script>
            <div id="container-1ff05805f1f1e254ff63bae30ac5d8e3"></div>
        </div>

        <!-- Footer -->
        <footer class="text-center py-10 border-t border-white/5">
            <div class="flex items-center justify-center gap-3 mb-4">
                <div class="w-8 h-8 rounded-lg bg-gradient-to-br from-violet-500 to-indigo-500 flex items-center justify-center text-white font-black text-xs">M</div>
                <span class="text-sm font-bold text-white">MDH TESTER</span>
            </div>
            <p class="text-gray-600 text-xs mb-2">
                Created with ‚ù§Ô∏è by <span class="text-violet-400 font-semibold">MDHojayfa</span>
            </p>
            <div class="flex items-center justify-center gap-4 mb-4">
                <a href="https://t.me/MDHojayfa_bot" target="_blank" class="text-blue-400 hover:text-blue-300 transition text-xs flex items-center gap-1.5">
                    <svg class="w-3.5 h-3.5" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm5.894 8.221l-1.97 9.28c-.145.658-.537.818-1.084.508l-3-2.21-1.446 1.394c-.14.18-.357.295-.6.295l.213-3.053 5.56-5.023c.242-.213-.054-.334-.373-.121l-6.869 4.326-2.96-.924c-.64-.203-.658-.64.135-.954l11.566-4.458c.538-.196 1.006.128.832.94z"/></svg>
                    @MDHojayfa_bot
                </a>
                <button onclick="openShare()" class="text-violet-400 hover:text-violet-300 transition text-xs flex items-center gap-1.5">
                    <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"/></svg>
                    Share This Tool
                </button>
            </div>
            <p class="text-gray-800 text-[10px]">v2.0 ‚Ä¢ All tests run client-side. Keys never leave your browser.</p>
        </footer>
    </main>

    <!-- FAB Share Button (mobile) -->
    <div class="fab sm:hidden" onclick="openShare()" title="Share MDH TESTER">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"/></svg>
    </div>

    <!-- SHARE MODAL -->
    <div id="shareModal" class="modal-overlay" onclick="if(event.target===this)closeShare()">
        <div class="modal-content glass-card p-6 md:p-8 w-[90%] max-w-md">
            <div class="flex items-center justify-between mb-6">
                <h3 class="text-lg font-bold text-white flex items-center gap-2">
                    <svg class="w-5 h-5 text-violet-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"/></svg>
                    Share MDH TESTER
                </h3>
                <button onclick="closeShare()" class="text-gray-500 hover:text-white transition text-lg">‚úï</button>
            </div>

            <!-- Copy Link -->
            <div class="mb-5">
                <label class="block text-[10px] text-gray-500 uppercase tracking-widest font-bold mb-2">Copy Link</label>
                <div class="flex gap-2">
                    <input type="text" value="https://mdhojayfa.github.io/mdhtester.html" readonly class="flex-1 input-dark px-3 py-2.5 text-xs mono" id="shareUrl">
                    <button onclick="copyShareLink()" class="btn-primary px-4 py-2.5 rounded-xl text-xs font-bold text-white" id="copyLinkBtn">Copy</button>
                </div>
            </div>

            <!-- Social Share -->
            <div class="mb-2">
                <label class="block text-[10px] text-gray-500 uppercase tracking-widest font-bold mb-3">Share via</label>
                <div class="grid grid-cols-2 gap-2">
                    <button onclick="shareVia('twitter')" class="flex items-center gap-2 px-4 py-3 rounded-xl bg-[#1DA1F2]/10 border border-[#1DA1F2]/20 text-[#1DA1F2] text-xs font-semibold hover:bg-[#1DA1F2]/20 transition">
                        <svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
                        Twitter / X
                    </button>
                    <button onclick="shareVia('telegram')" class="flex items-center gap-2 px-4 py-3 rounded-xl bg-[#0088cc]/10 border border-[#0088cc]/20 text-[#0088cc] text-xs font-semibold hover:bg-[#0088cc]/20 transition">
                        <svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm5.894 8.221l-1.97 9.28c-.145.658-.537.818-1.084.508l-3-2.21-1.446 1.394c-.14.18-.357.295-.6.295l.213-3.053 5.56-5.023c.242-.213-.054-.334-.373-.121l-6.869 4.326-2.96-.924c-.64-.203-.658-.64.135-.954l11.566-4.458c.538-.196 1.006.128.832.94z"/></svg>
                        Telegram
                    </button>
                    <button onclick="shareVia('whatsapp')" class="flex items-center gap-2 px-4 py-3 rounded-xl bg-[#25D366]/10 border border-[#25D366]/20 text-[#25D366] text-xs font-semibold hover:bg-[#25D366]/20 transition">
                        <svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/></svg>
                        WhatsApp
                    </button>
                    <button onclick="shareVia('linkedin')" class="flex items-center gap-2 px-4 py-3 rounded-xl bg-[#0077B5]/10 border border-[#0077B5]/20 text-[#0077B5] text-xs font-semibold hover:bg-[#0077B5]/20 transition">
                        <svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
                        LinkedIn
                    </button>
                    <button onclick="shareVia('reddit')" class="flex items-center gap-2 px-4 py-3 rounded-xl bg-[#FF4500]/10 border border-[#FF4500]/20 text-[#FF4500] text-xs font-semibold hover:bg-[#FF4500]/20 transition">
                        <svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z"/></svg>
                        Reddit
                    </button>
                    <button onclick="shareVia('email')" class="flex items-center gap-2 px-4 py-3 rounded-xl bg-gray-500/10 border border-gray-500/20 text-gray-400 text-xs font-semibold hover:bg-gray-500/20 transition">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/></svg>
                        Email
                    </button>
                </div>
            </div>

            <!-- QR hint -->
            <div class="text-center pt-3 border-t border-white/5 mt-4">
                <p class="text-[10px] text-gray-600">Share MDH TESTER with friends and help developers worldwide! üåç</p>
            </div>
        </div>
    </div>

    <!-- HISTORY PANEL -->
    <div id="historyOverlay" class="overlay" onclick="toggleHistory()"></div>
    <div id="historyPanel" class="history-panel">
        <div class="p-5 md:p-6">
            <div class="flex items-center justify-between mb-6">
                <h3 class="text-lg font-bold text-white flex items-center gap-2">
                    <svg class="w-5 h-5 text-violet-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                    Test History
                </h3>
                <div class="flex items-center gap-2">
                    <button onclick="exportHistory()" class="text-[10px] text-violet-400 hover:text-violet-300 transition px-2.5 py-1.5 rounded-lg hover:bg-violet-500/10 font-semibold">Export</button>
                    <button onclick="clearHistory()" class="text-[10px] text-red-400 hover:text-red-300 transition px-2.5 py-1.5 rounded-lg hover:bg-red-500/10 font-semibold">Clear</button>
                    <button onclick="toggleHistory()" class="text-gray-500 hover:text-white transition p-1">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
                    </button>
                </div>
            </div>
            <div id="historyList" class="space-y-2.5"></div>
            <div id="emptyHistory" class="text-center py-16">
                <div class="w-16 h-16 rounded-2xl bg-white/3 flex items-center justify-center mx-auto mb-4">
                    <svg class="w-8 h-8 text-gray-700" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                </div>
                <p class="text-sm text-gray-600 font-medium">No tests yet</p>
                <p class="text-xs text-gray-700 mt-1">Test an API key to see your history here</p>
            </div>
        </div>
    </div>

    <!-- TOAST -->
    <div id="toast" class="toast">
        <div class="glass-card px-5 py-3 flex items-center gap-3 shadow-2xl">
            <span id="toastIcon" class="text-lg"></span>
            <span id="toastMsg" class="text-sm text-gray-200 font-medium"></span>
        </div>
    </div>

    <!-- Social Bar Ad (non-intrusive) -->
    <script type="text/javascript" src="https://pl28281605.effectivegatecpm.com/55/cd/5e/55cd5eea223aebc7290d280ad29905d5.js"></script>

    <script>
    // ============== SITE URL ==============
    const SITE_URL = 'https://mdhojayfa.github.io/mdhtester.html';
    const SITE_NAME = 'MDH TESTER';
    const SITE_DESC = 'Test & validate 70+ API keys instantly ‚Äî Free universal API key tester by MDHojayfa';

    // ============== API PROVIDERS DATABASE ==============
    const API_PROVIDERS = [
        // AI & ML (16)
        { id: 'openai', name: 'OpenAI', icon: 'ü§ñ', category: 'AI & ML', info: 'Test GPT/ChatGPT API keys (sk-...)', keyPrefix: 'sk-',
          test: (key) => fetch('https://api.openai.com/v1/models', { headers: { 'Authorization': `Bearer ${key}` } }) },
        { id: 'anthropic', name: 'Anthropic Claude', icon: 'üß†', category: 'AI & ML', info: 'Test Claude API keys',
          test: (key) => fetch('https://api.anthropic.com/v1/messages', { method: 'POST', headers: { 'x-api-key': key, 'anthropic-version': '2023-06-01', 'Content-Type': 'application/json' }, body: JSON.stringify({ model: 'claude-3-haiku-20240307', max_tokens: 1, messages: [{ role: 'user', content: 'hi' }] }) }) },
        { id: 'gemini', name: 'Google Gemini', icon: 'üíé', category: 'AI & ML', info: 'Test Gemini API keys',
          test: (key) => fetch(`https://generativelanguage.googleapis.com/v1beta/models?key=${key}`) },
        { id: 'groq', name: 'Groq', icon: '‚ö°', category: 'AI & ML', info: 'Test Groq API keys (gsk_...)',
          test: (key) => fetch('https://api.groq.com/openai/v1/models', { headers: { 'Authorization': `Bearer ${key}` } }) },
        { id: 'mistral', name: 'Mistral AI', icon: 'üåä', category: 'AI & ML', info: 'Test Mistral API keys',
          test: (key) => fetch('https://api.mistral.ai/v1/models', { headers: { 'Authorization': `Bearer ${key}` } }) },
        { id: 'cohere', name: 'Cohere', icon: 'üîÆ', category: 'AI & ML', info: 'Test Cohere API keys',
          test: (key) => fetch('https://api.cohere.ai/v1/models', { headers: { 'Authorization': `Bearer ${key}` } }) },
        { id: 'huggingface', name: 'HuggingFace', icon: 'ü§ó', category: 'AI & ML', info: 'Test HuggingFace tokens (hf_...)',
          test: (key) => fetch('https://huggingface.co/api/whoami-v2', { headers: { 'Authorization': `Bearer ${key}` } }) },
        { id: 'replicate', name: 'Replicate', icon: 'üîÅ', category: 'AI & ML', info: 'Test Replicate API tokens',
          test: (key) => fetch('https://api.replicate.com/v1/account', { headers: { 'Authorization': `Token ${key}` } }) },
        { id: 'stabilityai', name: 'Stability AI', icon: 'üé®', category: 'AI & ML', info: 'Test Stability AI keys',
          test: (key) => fetch('https://api.stability.ai/v1/user/account', { headers: { 'Authorization': `Bearer ${key}` } }) },
        { id: 'openrouter', name: 'OpenRouter', icon: 'üõ§Ô∏è', category: 'AI & ML', info: 'Test OpenRouter API keys',
          test: (key) => fetch('https://openrouter.ai/api/v1/models', { headers: { 'Authorization': `Bearer ${key}` } }) },
        { id: 'perplexity', name: 'Perplexity AI', icon: 'üîç', category: 'AI & ML', info: 'Test Perplexity API keys (pplx-...)',
          test: (key) => fetch('https://api.perplexity.ai/chat/completions', { method: 'POST', headers: { 'Authorization': `Bearer ${key}`, 'Content-Type': 'application/json' }, body: JSON.stringify({ model: 'llama-3.1-sonar-small-128k-online', messages: [{ role: 'user', content: 'hi' }], max_tokens: 1 }) }) },
        { id: 'together', name: 'Together AI', icon: 'ü§ù', category: 'AI & ML', info: 'Test Together AI API keys',
          test: (key) => fetch('https://api.together.xyz/v1/models', { headers: { 'Authorization': `Bearer ${key}` } }) },
        { id: 'elevenlabs', name: 'ElevenLabs', icon: 'üéôÔ∏è', category: 'AI & ML', info: 'Test ElevenLabs voice AI keys',
          test: (key) => fetch('https://api.elevenlabs.io/v1/user', { headers: { 'xi-api-key': key } }) },
        { id: 'deepl', name: 'DeepL', icon: 'üåç', category: 'AI & ML', info: 'Test DeepL translation API keys',
          test: (key) => fetch('https://api-free.deepl.com/v2/usage', { headers: { 'Authorization': `DeepL-Auth-Key ${key}` } }) },
        { id: 'assemblyai', name: 'AssemblyAI', icon: 'üé§', category: 'AI & ML', info: 'Test AssemblyAI speech-to-text keys',
          test: (key) => fetch('https://api.assemblyai.com/v2/transcript?limit=1', { headers: { 'Authorization': key } }) },
        { id: 'ai21', name: 'AI21 Labs', icon: 'üß™', category: 'AI & ML', info: 'Test AI21 Jurassic API keys',
          test: (key) => fetch('https://api.ai21.com/studio/v1/models', { headers: { 'Authorization': `Bearer ${key}` } }) },

        // Cloud & Infra (10)
        { id: 'digitalocean', name: 'DigitalOcean', icon: 'üê≥', category: 'Cloud', info: 'Test DigitalOcean personal access tokens',
          test: (key) => fetch('https://api.digitalocean.com/v2/account', { headers: { 'Authorization': `Bearer ${key}` } }) },
        { id: 'heroku', name: 'Heroku', icon: 'üü™', category: 'Cloud', info: 'Test Heroku API keys',
          test: (key) => fetch('https://api.heroku.com/account', { headers: { 'Authorization': `Bearer ${key}`, 'Accept': 'application/vnd.heroku+json; version=3' } }) },
        { id: 'cloudflare', name: 'Cloudflare', icon: '‚òÅÔ∏è', category: 'Cloud', info: 'Test Cloudflare API tokens',
          test: (key) => fetch('https://api.cloudflare.com/client/v4/user/tokens/verify', { headers: { 'Authorization': `Bearer ${key}` } }) },
        { id: 'vercel', name: 'Vercel', icon: '‚ñ≤', category: 'Cloud', info: 'Test Vercel API tokens',
          test: (key) => fetch('https://api.vercel.com/v2/user', { headers: { 'Authorization': `Bearer ${key}` } }) },
        { id: 'netlify', name: 'Netlify', icon: 'üåê', category: 'Cloud', info: 'Test Netlify personal access tokens',
          test: (key) => fetch('https://api.netlify.com/api/v1/user', { headers: { 'Authorization': `Bearer ${key}` } }) },
        { id: 'render', name: 'Render', icon: 'üéØ', category: 'Cloud', info: 'Test Render API keys',
          test: (key) => fetch('https://api.render.com/v1/owners', { headers: { 'Authorization': `Bearer ${key}` } }) },
        { id: 'linode', name: 'Linode/Akamai', icon: 'üü¢', category: 'Cloud', info: 'Test Linode API tokens',
          test: (key) => fetch('https://api.linode.com/v4/profile', { headers: { 'Authorization': `Bearer ${key}` } }) },
        { id: 'vultr', name: 'Vultr', icon: 'üîµ', category: 'Cloud', info: 'Test Vultr API keys',
          test: (key) => fetch('https://api.vultr.com/v2/account', { headers: { 'Authorization': `Bearer ${key}` } }) },
        { id: 'railway', name: 'Railway', icon: 'üöÇ', category: 'Cloud', info: 'Test Railway API tokens',
          test: (key) => fetch('https://backboard.railway.app/graphql/v2', { method: 'POST', headers: { 'Authorization': `Bearer ${key}`, 'Content-Type': 'application/json' }, body: JSON.stringify({ query: '{ me { id name } }' }) }) },
        { id: 'fly', name: 'Fly.io', icon: 'ü™Å', category: 'Cloud', info: 'Test Fly.io auth tokens',
          test: (key) => fetch('https://api.fly.io/graphql', { method: 'POST', headers: { 'Authorization': `Bearer ${key}`, 'Content-Type': 'application/json' }, body: JSON.stringify({ query: '{ viewer { email } }' }) }) },

        // DevOps (10)
        { id: 'github', name: 'GitHub', icon: 'üêô', category: 'DevOps', info: 'Test GitHub personal access tokens (ghp_...)',
          test: (key) => fetch('https://api.github.com/user', { headers: { 'Authorization': `Bearer ${key}` } }) },
        { id: 'gitlab', name: 'GitLab', icon: 'ü¶ä', category: 'DevOps', info: 'Test GitLab personal access tokens',
          test: (key) => fetch('https://gitlab.com/api/v4/user', { headers: { 'PRIVATE-TOKEN': key } }) },
        { id: 'bitbucket', name: 'Bitbucket', icon: 'ü™£', category: 'DevOps', info: 'Test Bitbucket app passwords (user:password)',
          test: (key) => fetch('https://api.bitbucket.org/2.0/user', { headers: { 'Authorization': `Basic ${btoa(key)}` } }) },
        { id: 'npm', name: 'NPM', icon: 'üì¶', category: 'DevOps', info: 'Test NPM access tokens',
          test: (key) => fetch('https://registry.npmjs.org/-/npm/v1/user', { headers: { 'Authorization': `Bearer ${key}` } }) },
        { id: 'dockerhub', name: 'Docker Hub', icon: 'üêã', category: 'DevOps', info: 'Test Docker Hub tokens',
          test: (key) => fetch('https://hub.docker.com/v2/user/', { headers: { 'Authorization': `Bearer ${key}` } }) },
        { id: 'circleci', name: 'CircleCI', icon: '‚≠ï', category: 'DevOps', info: 'Test CircleCI API tokens',
          test: (key) => fetch('https://circleci.com/api/v2/me', { headers: { 'Circle-Token': key } }) },
        { id: 'travis', name: 'Travis CI', icon: 'üî®', category: 'DevOps', info: 'Test Travis CI tokens',
          test: (key) => fetch('https://api.travis-ci.com/user', { headers: { 'Authorization': `token ${key}`, 'Travis-API-Version': '3' } }) },
        { id: 'sentry', name: 'Sentry', icon: 'üêõ', category: 'DevOps', info: 'Test Sentry auth tokens',
          test: (key) => fetch('https://sentry.io/api/0/auth/', { headers: { 'Authorization': `Bearer ${key}` } }) },
        { id: 'sonarcloud', name: 'SonarCloud', icon: 'üîä', category: 'DevOps', info: 'Test SonarCloud user tokens',
          test: (key) => fetch('https://sonarcloud.io/api/authentication/validate', { headers: { 'Authorization': `Basic ${btoa(key + ':')}` } }) },
        { id: 'codecov', name: 'Codecov', icon: 'üìä', category: 'DevOps', info: 'Test Codecov tokens',
          test: (key) => fetch('https://codecov.io/api/v2/github/', { headers: { 'Authorization': `bearer ${key}` } }) },

        // Communication (10)
        { id: 'telegram', name: 'Telegram Bot', icon: 'üì±', category: 'Communication', info: 'Test Telegram Bot API tokens',
          test: (key) => fetch(`https://api.telegram.org/bot${key}/getMe`) },
        { id: 'discord', name: 'Discord Bot', icon: 'üí¨', category: 'Communication', info: 'Test Discord Bot tokens',
          test: (key) => fetch('https://discord.com/api/v10/users/@me', { headers: { 'Authorization': `Bot ${key}` } }) },
        { id: 'slack', name: 'Slack', icon: 'üíº', category: 'Communication', info: 'Test Slack tokens (xoxb-... or xoxp-...)',
          test: (key) => fetch(`https://slack.com/api/auth.test?token=${key}`) },
        { id: 'twilio', name: 'Twilio', icon: 'üìû', category: 'Communication', extraFields: [{ id: 'twilioSid', label: 'Account SID', placeholder: 'ACxxxxxxxx' }], info: 'Enter Account SID + Auth Token',
          test: (key, extra) => fetch(`https://api.twilio.com/2010-04-01/Accounts/${extra.twilioSid}.json`, { headers: { 'Authorization': `Basic ${btoa(extra.twilioSid + ':' + key)}` } }) },
        { id: 'sendgrid', name: 'SendGrid', icon: 'üìß', category: 'Communication', info: 'Test SendGrid API keys (SG....)',
          test: (key) => fetch('https://api.sendgrid.com/v3/user/profile', { headers: { 'Authorization': `Bearer ${key}` } }) },
        { id: 'mailgun', name: 'Mailgun', icon: '‚úâÔ∏è', category: 'Communication', info: 'Test Mailgun API keys',
          test: (key) => fetch('https://api.mailgun.net/v3/domains', { headers: { 'Authorization': `Basic ${btoa('api:' + key)}` } }) },
        { id: 'postmark', name: 'Postmark', icon: 'üì¨', category: 'Communication', info: 'Test Postmark server tokens',
          test: (key) => fetch('https://api.postmarkapp.com/server', { headers: { 'X-Postmark-Server-Token': key, 'Accept': 'application/json' } }) },
        { id: 'pusher', name: 'Pusher', icon: 'üîî', category: 'Communication', extraFields: [{ id: 'pusherAppId', label: 'App ID', placeholder: 'App ID' }, { id: 'pusherSecret', label: 'Secret', placeholder: 'Secret' }], info: 'Enter key, app ID and secret',
          test: (key, extra) => fetch(`https://api.pusherapp.com/apps/${extra.pusherAppId}/channels`, { headers: { 'Authorization': `Basic ${btoa(key + ':' + extra.pusherSecret)}` } }) },
        { id: 'resend', name: 'Resend', icon: 'üì§', category: 'Communication', info: 'Test Resend email API keys (re_...)',
          test: (key) => fetch('https://api.resend.com/domains', { headers: { 'Authorization': `Bearer ${key}` } }) },
        { id: 'vonage', name: 'Vonage', icon: 'üì≥', category: 'Communication', extraFields: [{ id: 'vonageSecret', label: 'API Secret', placeholder: 'Secret' }], info: 'Enter API Key + API Secret',
          test: (key, extra) => fetch(`https://rest.nexmo.com/account/get-balance?api_key=${key}&api_secret=${extra.vonageSecret}`) },

        // Payment (6)
        { id: 'stripe', name: 'Stripe', icon: 'üí≥', category: 'Payment', info: 'Test Stripe secret keys (sk_live/test_...)',
          test: (key) => fetch('https://api.stripe.com/v1/balance', { headers: { 'Authorization': `Bearer ${key}` } }) },
        { id: 'paypal', name: 'PayPal', icon: 'üÖøÔ∏è', category: 'Payment', extraFields: [{ id: 'paypalSecret', label: 'Client Secret', placeholder: 'Secret...' }], info: 'Enter Client ID as key + Client Secret',
          test: (key, extra) => fetch('https://api-m.paypal.com/v1/oauth2/token', { method: 'POST', headers: { 'Authorization': `Basic ${btoa(key + ':' + extra.paypalSecret)}`, 'Content-Type': 'application/x-www-form-urlencoded' }, body: 'grant_type=client_credentials' }) },
        { id: 'square', name: 'Square', icon: '‚¨õ', category: 'Payment', info: 'Test Square access tokens',
          test: (key) => fetch('https://connect.squareup.com/v2/merchants', { headers: { 'Authorization': `Bearer ${key}` } }) },
        { id: 'coinbase', name: 'Coinbase', icon: 'ü™ô', category: 'Payment', info: 'Test Coinbase API keys',
          test: (key) => fetch('https://api.coinbase.com/v2/user', { headers: { 'Authorization': `Bearer ${key}` } }) },
        { id: 'lemonsqueezy', name: 'Lemon Squeezy', icon: 'üçã', category: 'Payment', info: 'Test Lemon Squeezy API keys',
          test: (key) => fetch('https://api.lemonsqueezy.com/v1/users/me', { headers: { 'Authorization': `Bearer ${key}`, 'Accept': 'application/vnd.api+json' } }) },
        { id: 'paddle', name: 'Paddle', icon: 'üèì', category: 'Payment', info: 'Test Paddle API keys',
          test: (key) => fetch('https://api.paddle.com/event-types', { headers: { 'Authorization': `Bearer ${key}` } }) },

        // Data & Maps (7)
        { id: 'googlemaps', name: 'Google Maps', icon: 'üó∫Ô∏è', category: 'Data & Maps', info: 'Test Google Maps API keys',
          test: (key) => fetch(`https://maps.googleapis.com/maps/api/geocode/json?address=test&key=${key}`) },
        { id: 'mapbox', name: 'Mapbox', icon: 'üìç', category: 'Data & Maps', info: 'Test Mapbox access tokens',
          test: (key) => fetch(`https://api.mapbox.com/tokens/v2?access_token=${key}`) },
        { id: 'openweather', name: 'OpenWeatherMap', icon: 'üå§Ô∏è', category: 'Data & Maps', info: 'Test OpenWeatherMap API keys',
          test: (key) => fetch(`https://api.openweathermap.org/data/2.5/weather?q=London&appid=${key}`) },
        { id: 'newsapi', name: 'NewsAPI', icon: 'üì∞', category: 'Data & Maps', info: 'Test NewsAPI keys',
          test: (key) => fetch(`https://newsapi.org/v2/top-headlines?country=us&pageSize=1&apiKey=${key}`) },
        { id: 'ipinfo', name: 'IPinfo', icon: 'üåç', category: 'Data & Maps', info: 'Test IPinfo tokens',
          test: (key) => fetch(`https://ipinfo.io/json?token=${key}`) },
        { id: 'abstractapi', name: 'AbstractAPI', icon: 'üîó', category: 'Data & Maps', info: 'Test AbstractAPI keys (IP geolocation)',
          test: (key) => fetch(`https://ipgeolocation.abstractapi.com/v1/?api_key=${key}`) },
        { id: 'exchangerate', name: 'ExchangeRate', icon: 'üí±', category: 'Data & Maps', info: 'Test ExchangeRate API keys',
          test: (key) => fetch(`https://v6.exchangerate-api.com/v6/${key}/latest/USD`) },

        // Security (6)
        { id: 'virustotal', name: 'VirusTotal', icon: 'üõ°Ô∏è', category: 'Security', info: 'Test VirusTotal API keys',
          test: (key) => fetch('https://www.virustotal.com/api/v3/users/me', { headers: { 'x-apikey': key } }) },
        { id: 'shodan', name: 'Shodan', icon: 'üîé', category: 'Security', info: 'Test Shodan API keys',
          test: (key) => fetch(`https://api.shodan.io/api-info?key=${key}`) },
        { id: 'abuseipdb', name: 'AbuseIPDB', icon: 'üö´', category: 'Security', info: 'Test AbuseIPDB keys',
          test: (key) => fetch('https://api.abuseipdb.com/api/v2/check?ipAddress=8.8.8.8', { headers: { 'Key': key, 'Accept': 'application/json' } }) },
        { id: 'securitytrails', name: 'SecurityTrails', icon: 'üîê', category: 'Security', info: 'Test SecurityTrails API keys',
          test: (key) => fetch('https://api.securitytrails.com/v1/ping', { headers: { 'APIKEY': key } }) },
        { id: 'hunter', name: 'Hunter.io', icon: 'üéØ', category: 'Security', info: 'Test Hunter.io API keys',
          test: (key) => fetch(`https://api.hunter.io/v2/account?api_key=${key}`) },
        { id: 'urlscan', name: 'URLScan.io', icon: 'üåê', category: 'Security', info: 'Test URLScan.io API keys',
          test: (key) => fetch('https://urlscan.io/api/v1/search/?q=domain:example.com&size=1', { headers: { 'API-Key': key } }) },

        // Productivity (7)
        { id: 'notion', name: 'Notion', icon: 'üìù', category: 'Productivity', info: 'Test Notion integration tokens',
          test: (key) => fetch('https://api.notion.com/v1/users/me', { headers: { 'Authorization': `Bearer ${key}`, 'Notion-Version': '2022-06-28' } }) },
        { id: 'airtable', name: 'Airtable', icon: 'üìä', category: 'Productivity', info: 'Test Airtable personal access tokens',
          test: (key) => fetch('https://api.airtable.com/v0/meta/whoami', { headers: { 'Authorization': `Bearer ${key}` } }) },
        { id: 'asana', name: 'Asana', icon: 'üìã', category: 'Productivity', info: 'Test Asana personal access tokens',
          test: (key) => fetch('https://app.asana.com/api/1.0/users/me', { headers: { 'Authorization': `Bearer ${key}` } }) },
        { id: 'linear', name: 'Linear', icon: 'üìê', category: 'Productivity', info: 'Test Linear API keys',
          test: (key) => fetch('https://api.linear.app/graphql', { method: 'POST', headers: { 'Authorization': key, 'Content-Type': 'application/json' }, body: JSON.stringify({ query: '{ viewer { id name } }' }) }) },
        { id: 'clickup', name: 'ClickUp', icon: '‚úÖ', category: 'Productivity', info: 'Test ClickUp API tokens',
          test: (key) => fetch('https://api.clickup.com/api/v2/user', { headers: { 'Authorization': key } }) },
        { id: 'todoist', name: 'Todoist', icon: '‚òëÔ∏è', category: 'Productivity', info: 'Test Todoist API tokens',
          test: (key) => fetch('https://api.todoist.com/rest/v2/projects', { headers: { 'Authorization': `Bearer ${key}` } }) },
        { id: 'trello', name: 'Trello', icon: 'üìá', category: 'Productivity', extraFields: [{ id: 'trelloToken', label: 'Token', placeholder: 'Token...' }], info: 'Enter API Key + Token',
          test: (key, extra) => fetch(`https://api.trello.com/1/members/me?key=${key}&token=${extra.trelloToken}`) },

        // Media (8)
        { id: 'youtube', name: 'YouTube Data', icon: '‚ñ∂Ô∏è', category: 'Media', info: 'Test YouTube Data API keys',
          test: (key) => fetch(`https://www.googleapis.com/youtube/v3/channels?part=id&mine=true&key=${key}`) },
        { id: 'spotify', name: 'Spotify', icon: 'üéµ', category: 'Media', extraFields: [{ id: 'spotifySecret', label: 'Client Secret', placeholder: 'Secret...' }], info: 'Enter Client ID + Client Secret',
          test: (key, extra) => fetch('https://accounts.spotify.com/api/token', { method: 'POST', headers: { 'Authorization': `Basic ${btoa(key + ':' + extra.spotifySecret)}`, 'Content-Type': 'application/x-www-form-urlencoded' }, body: 'grant_type=client_credentials' }) },
        { id: 'unsplash', name: 'Unsplash', icon: 'üì∑', category: 'Media', info: 'Test Unsplash access keys',
          test: (key) => fetch('https://api.unsplash.com/me', { headers: { 'Authorization': `Client-ID ${key}` } }) },
        { id: 'giphy', name: 'Giphy', icon: 'üéûÔ∏è', category: 'Media', info: 'Test Giphy API keys',
          test: (key) => fetch(`https://api.giphy.com/v1/gifs/trending?api_key=${key}&limit=1`) },
        { id: 'tmdb', name: 'TMDB', icon: 'üé¨', category: 'Media', info: 'Test TMDB API keys',
          test: (key) => fetch(`https://api.themoviedb.org/3/movie/popular?api_key=${key}`) },
        { id: 'imgur', name: 'Imgur', icon: 'üñºÔ∏è', category: 'Media', info: 'Test Imgur Client IDs',
          test: (key) => fetch('https://api.imgur.com/3/credits', { headers: { 'Authorization': `Client-ID ${key}` } }) },
        { id: 'pexels', name: 'Pexels', icon: 'üì∏', category: 'Media', info: 'Test Pexels API keys',
          test: (key) => fetch('https://api.pexels.com/v1/curated?per_page=1', { headers: { 'Authorization': key } }) },
        { id: 'cloudinary', name: 'Cloudinary', icon: '‚òÅÔ∏è', category: 'Media', extraFields: [{ id: 'cloudSecret', label: 'API Secret', placeholder: 'Secret' }], info: 'Enter API Key + Secret',
          test: (key, extra) => fetch(`https://api.cloudinary.com/v1_1/demo/resources/image?max_results=1`, { headers: { 'Authorization': `Basic ${btoa(key + ':' + extra.cloudSecret)}` } }) },

        // Analytics (4)
        { id: 'mixpanel', name: 'Mixpanel', icon: 'üìà', category: 'Analytics', info: 'Test Mixpanel API secrets',
          test: (key) => fetch('https://mixpanel.com/api/app/me', { headers: { 'Authorization': `Basic ${btoa(key + ':')}` } }) },
        { id: 'amplitude', name: 'Amplitude', icon: 'üìâ', category: 'Analytics', info: 'Test Amplitude API keys', extraFields: [{ id: 'ampSecret', label: 'Secret Key', placeholder: 'Secret...' }],
          test: (key, extra) => fetch('https://amplitude.com/api/2/export?start=20240101T00&end=20240101T01', { headers: { 'Authorization': `Basic ${btoa(key + ':' + extra.ampSecret)}` } }) },
        { id: 'posthog', name: 'PostHog', icon: 'ü¶î', category: 'Analytics', info: 'Test PostHog personal API keys',
          test: (key) => fetch('https://app.posthog.com/api/users/@me/', { headers: { 'Authorization': `Bearer ${key}` } }) },
        { id: 'plausible', name: 'Plausible', icon: 'üìä', category: 'Analytics', info: 'Test Plausible API keys',
          test: (key) => fetch('https://plausible.io/api/v1/stats/aggregate?site_id=dummy&period=day', { headers: { 'Authorization': `Bearer ${key}` } }) },

        // Database (6)
        { id: 'supabase', name: 'Supabase', icon: '‚ö°', category: 'Database', extraFields: [{ id: 'supaUrl', label: 'Project URL', placeholder: 'https://xxx.supabase.co' }], info: 'Enter anon/service key + project URL',
          test: (key, extra) => fetch(`${extra.supaUrl}/rest/v1/`, { headers: { 'apikey': key, 'Authorization': `Bearer ${key}` } }) },
        { id: 'firebase', name: 'Firebase', icon: 'üî•', category: 'Database', info: 'Test Firebase Web API keys',
          test: (key) => fetch(`https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=${key}`, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({}) }) },
        { id: 'planetscale', name: 'PlanetScale', icon: 'ü™ê', category: 'Database', info: 'Test PlanetScale API tokens',
          test: (key) => fetch('https://api.planetscale.com/v1/organizations', { headers: { 'Authorization': key } }) },
        { id: 'mongodb', name: 'MongoDB Atlas', icon: 'üçÉ', category: 'Database', extraFields: [{ id: 'mongoPriv', label: 'Private Key', placeholder: 'Private API Key...' }], info: 'Enter Public Key + Private Key',
          test: (key, extra) => fetch('https://cloud.mongodb.com/api/atlas/v1.0', { headers: { 'Authorization': `Basic ${btoa(key + ':' + extra.mongoPriv)}` } }) },
        { id: 'upstash', name: 'Upstash', icon: 'üî∫', category: 'Database', extraFields: [{ id: 'upstashUrl', label: 'REST URL', placeholder: 'https://xxx.upstash.io' }], info: 'Enter token + REST URL',
          test: (key, extra) => fetch(`${extra.upstashUrl}/ping`, { headers: { 'Authorization': `Bearer ${key}` } }) },
        { id: 'neon', name: 'Neon', icon: 'üü¢', category: 'Database', info: 'Test Neon serverless Postgres API keys',
          test: (key) => fetch('https://console.neon.tech/api/v2/projects', { headers: { 'Authorization': `Bearer ${key}` } }) },

        // Other / Misc (8)
        { id: 'rapidapi', name: 'RapidAPI', icon: 'üöÄ', category: 'Other', info: 'Test RapidAPI keys',
          test: (key) => fetch('https://judge0-ce.p.rapidapi.com/about', { headers: { 'X-RapidAPI-Key': key } }) },
        { id: 'zendesk', name: 'Zendesk', icon: 'üíö', category: 'Other', extraFields: [{ id: 'zdDomain', label: 'Subdomain', placeholder: 'yourcompany' }, { id: 'zdEmail', label: 'Email', placeholder: 'you@email.com' }], info: 'Enter API token + subdomain + email',
          test: (key, extra) => fetch(`https://${extra.zdDomain}.zendesk.com/api/v2/users/me.json`, { headers: { 'Authorization': `Basic ${btoa(extra.zdEmail + '/token:' + key)}` } }) },
        { id: 'freshdesk', name: 'Freshdesk', icon: 'üü©', category: 'Other', extraFields: [{ id: 'fdDomain', label: 'Domain', placeholder: 'yourcompany' }], info: 'Enter API key + Freshdesk domain',
          test: (key, extra) => fetch(`https://${extra.fdDomain}.freshdesk.com/api/v2/tickets?per_page=1`, { headers: { 'Authorization': `Basic ${btoa(key + ':X')}` } }) },
        { id: 'pagerduty', name: 'PagerDuty', icon: 'üö®', category: 'Other', info: 'Test PagerDuty API keys',
          test: (key) => fetch('https://api.pagerduty.com/users?limit=1', { headers: { 'Authorization': `Token token=${key}` } }) },
        { id: 'datadog', name: 'Datadog', icon: 'üêï', category: 'Other', info: 'Test Datadog API keys',
          test: (key) => fetch('https://api.datadoghq.com/api/v1/validate', { headers: { 'DD-API-KEY': key } }) },
        { id: 'webflow', name: 'Webflow', icon: 'üåä', category: 'Other', info: 'Test Webflow API tokens',
          test: (key) => fetch('https://api.webflow.com/v2/token/introspect', { headers: { 'Authorization': `Bearer ${key}` } }) },
        { id: 'contentful', name: 'Contentful', icon: 'üìÑ', category: 'Other', extraFields: [{ id: 'cfSpace', label: 'Space ID', placeholder: 'Space ID' }], info: 'Enter CDA/CPA token + Space ID',
          test: (key, extra) => fetch(`https://cdn.contentful.com/spaces/${extra.cfSpace}`, { headers: { 'Authorization': `Bearer ${key}` } }) },
        { id: 'figma', name: 'Figma', icon: 'üé®', category: 'Other', info: 'Test Figma personal access tokens',
          test: (key) => fetch('https://api.figma.com/v1/me', { headers: { 'X-FIGMA-TOKEN': key } }) },
    ];

    // ============== STATE ==============
    let testHistory = JSON.parse(localStorage.getItem('mdhTestHistory') || '[]');
    let stats = JSON.parse(localStorage.getItem('mdhTestStats') || '{"total":0,"valid":0,"invalid":0}');
    let currentCategory = 'all';
    let lastResult = '';

    // ============== INIT ==============
    function init() {
        document.getElementById('serviceCount').textContent = API_PROVIDERS.length + '+';
        buildCategories();
        buildProviderSelect();
        renderServiceGrid();
        updateStats();
        renderHistory();

        // Keyboard shortcut Ctrl+K
        document.addEventListener('keydown', (e) => {
            if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
                e.preventDefault();
                document.getElementById('searchInput').focus();
            }
            if (e.key === 'Escape') {
                closeShare();
                if (document.getElementById('historyPanel').classList.contains('open')) toggleHistory();
            }
        });
    }

    function buildCategories() {
        const cats = [...new Set(API_PROVIDERS.map(p => p.category))];
        const container = document.getElementById('categoryFilters');
        const emojis = { 'AI & ML': 'ü§ñ', 'Cloud': '‚òÅÔ∏è', 'DevOps': '‚öôÔ∏è', 'Communication': 'üí¨', 'Payment': 'üí≥', 'Data & Maps': 'üó∫Ô∏è', 'Security': 'üõ°Ô∏è', 'Productivity': 'üìã', 'Media': 'üé¨', 'Analytics': 'üìä', 'Database': 'üóÑÔ∏è', 'Other': 'üì¶' };
        cats.forEach(cat => {
            const count = API_PROVIDERS.filter(p => p.category === cat).length;
            const chip = document.createElement('div');
            chip.className = 'chip px-3 py-1.5 bg-[rgba(20,20,35,0.8)] border border-gray-700/40 text-xs text-gray-400';
            chip.dataset.cat = cat;
            chip.onclick = () => filterCategory(cat);
            chip.innerHTML = `${emojis[cat] || 'üì¶'} ${cat} <span class="text-gray-600 ml-0.5">${count}</span>`;
            container.appendChild(chip);
        });
    }

    function buildProviderSelect() {
        const select = document.getElementById('apiProvider');
        const cats = [...new Set(API_PROVIDERS.map(p => p.category))];
        cats.forEach(cat => {
            const group = document.createElement('optgroup');
            group.label = cat;
            API_PROVIDERS.filter(p => p.category === cat).forEach(p => {
                const opt = document.createElement('option');
                opt.value = p.id;
                opt.textContent = `${p.icon} ${p.name}`;
                group.appendChild(opt);
            });
            select.appendChild(group);
        });
    }

    function renderServiceGrid() {
        const grid = document.getElementById('serviceGrid');
        const search = (document.getElementById('searchInput')?.value || '').toLowerCase();
        grid.innerHTML = '';
        let count = 0;
        API_PROVIDERS.forEach((p, i) => {
            const matchCat = currentCategory === 'all' || p.category === currentCategory;
            const matchSearch = !search || p.name.toLowerCase().includes(search) || p.category.toLowerCase().includes(search) || p.id.includes(search);
            if (!matchCat || !matchSearch) return;
            count++;
            const div = document.createElement('div');
            div.className = 'service-card p-3 flex items-center gap-2.5';
            div.style.animationDelay = `${Math.min(i * 0.03, 0.5)}s`;
            div.onclick = () => selectProvider(p.id);
            div.innerHTML = `
                <span class="text-xl flex-shrink-0">${p.icon}</span>
                <div class="min-w-0">
                    <div class="text-xs font-semibold text-gray-300 truncate">${p.name}</div>
                    <div class="text-[10px] text-gray-600">${p.category}</div>
                </div>`;
            grid.appendChild(div);
        });
        document.getElementById('visibleCount').textContent = `${count} of ${API_PROVIDERS.length} services`;
    }

    function selectProvider(id) {
        document.getElementById('apiProvider').value = id;
        onProviderChange();
        document.getElementById('apiKey').focus();
        document.getElementById('testerCard').scrollIntoView({ behavior: 'smooth', block: 'center' });
    }

    function filterCategory(cat) {
        currentCategory = cat;
        document.querySelectorAll('.chip').forEach(c => c.classList.toggle('active', c.dataset.cat === cat));
        renderServiceGrid();
    }

    function filterServices() { renderServiceGrid(); }

    function onProviderChange() {
        const id = document.getElementById('apiProvider').value;
        const provider = API_PROVIDERS.find(p => p.id === id);
        const infoEl = document.getElementById('providerInfo');
        const extraEl = document.getElementById('extraFields');
        const extraContainer = document.getElementById('extraFieldsContainer');

        if (provider?.info) {
            document.getElementById('providerInfoText').textContent = provider.info;
            infoEl.classList.remove('hidden');
        } else { infoEl.classList.add('hidden'); }

        if (provider?.extraFields) {
            extraContainer.innerHTML = '';
            provider.extraFields.forEach(f => {
                const div = document.createElement('div');
                div.innerHTML = `<label class="block text-[10px] text-gray-500 uppercase tracking-widest font-bold mb-2">${f.label}</label><input type="text" id="${f.id}" placeholder="${f.placeholder}" class="w-full input-dark px-4 py-3 text-sm mono">`;
                extraContainer.appendChild(div);
            });
            extraEl.classList.remove('hidden');
        } else { extraEl.classList.add('hidden'); extraContainer.innerHTML = ''; }
    }

    function toggleKeyVis() {
        const input = document.getElementById('apiKey');
        input.type = input.type === 'password' ? 'text' : 'password';
    }

    async function pasteKey() {
        try {
            const text = await navigator.clipboard.readText();
            document.getElementById('apiKey').value = text;
            showToast('üìã', 'Pasted from clipboard');
        } catch { showToast('‚ö†Ô∏è', 'Clipboard access denied'); }
    }

    // ============== TEST ==============
    async function testApiKey() {
        const providerId = document.getElementById('apiProvider').value;
        const apiKey = document.getElementById('apiKey').value.trim();
        if (!providerId) { showToast('‚ö†Ô∏è', 'Please select an API provider'); return; }
        if (!apiKey) { showToast('‚ö†Ô∏è', 'Please enter an API key'); return; }

        const provider = API_PROVIDERS.find(p => p.id === providerId);
        const btn = document.getElementById('testBtn');
        btn.disabled = true;
        btn.innerHTML = '<span class="loader"></span> Testing...';

        let extra = {};
        if (provider.extraFields) {
            provider.extraFields.forEach(f => { extra[f.id] = document.getElementById(f.id)?.value?.trim() || ''; });
        }

        try {
            const resp = await provider.test(apiKey, extra);
            let body = '';
            try { body = await resp.text(); } catch(e) {}
            let parsed = null;
            try { parsed = JSON.parse(body); } catch(e) {}
            const masked = apiKey.length > 10 ? apiKey.substring(0, 6) + '‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢' + apiKey.substring(apiKey.length - 4) : '‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢';

            if (resp.ok || resp.status === 200 || resp.status === 201) {
                showResult('valid', `Valid Key ‚Äî ${provider.name}`, `Status ${resp.status} ‚Ä¢ Key: ${masked}`, parsed ? JSON.stringify(parsed, null, 2) : body);
                addHistory(provider, masked, 'valid', resp.status);
                stats.valid++;
            } else if (resp.status === 401 || resp.status === 403) {
                showResult('invalid', `Invalid / Unauthorized ‚Äî ${provider.name}`, `Status ${resp.status} ‚Ä¢ Key: ${masked}`, parsed ? JSON.stringify(parsed, null, 2) : body);
                addHistory(provider, masked, 'invalid', resp.status);
                stats.invalid++;
            } else if (resp.status === 429) {
                showResult('warn', `Rate Limited ‚Äî ${provider.name}`, `Status ${resp.status} ‚Ä¢ Key may be valid but rate-limited`, parsed ? JSON.stringify(parsed, null, 2) : body);
                addHistory(provider, masked, 'ratelimit', resp.status);
                stats.valid++;
            } else {
                showResult('unknown', `Uncertain ‚Äî ${provider.name}`, `Status ${resp.status} ‚Ä¢ Key: ${masked}`, parsed ? JSON.stringify(parsed, null, 2) : body);
                addHistory(provider, masked, 'unknown', resp.status);
            }
            stats.total++;
        } catch (err) {
            showResult('error', `Error ‚Äî ${provider.name}`, 'Request failed ‚Äî likely CORS restrictions or network issue', `Error: ${err.message}\n\nTip: Some APIs block browser requests (CORS). Consider testing from a server/backend.`);
            stats.total++;
            stats.invalid++;
            addHistory(provider, apiKey.substring(0, 6) + '‚Ä¢‚Ä¢‚Ä¢‚Ä¢', 'error', 'CORS/Network');
        }

        localStorage.setItem('mdhTestStats', JSON.stringify(stats));
        updateStats();
        btn.disabled = false;
        btn.innerHTML = '<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/></svg> Test API Key';
    }

    function showResult(type, title, subtitle, details) {
        const card = document.getElementById('resultCard');
        const icon = document.getElementById('resultIcon');
        card.classList.remove('hidden', 'glow-green', 'glow-red', 'glow-yellow');

        const cfg = {
            valid:   { bg: 'bg-green-500/15', glow: 'glow-green', emoji: '‚úÖ' },
            invalid: { bg: 'bg-red-500/15', glow: 'glow-red', emoji: '‚ùå' },
            warn:    { bg: 'bg-yellow-500/15', glow: 'glow-yellow', emoji: '‚ö†Ô∏è' },
            unknown: { bg: 'bg-yellow-500/15', glow: 'glow-yellow', emoji: '‚ùì' },
            error:   { bg: 'bg-red-500/15', glow: 'glow-red', emoji: 'üí•' },
        }[type] || { bg: 'bg-gray-500/15', glow: '', emoji: '‚ùì' };

        card.classList.add(cfg.glow);
        icon.className = `w-11 h-11 rounded-xl flex items-center justify-center text-xl ${cfg.bg}`;
        icon.textContent = cfg.emoji;
        document.getElementById('resultTitle').textContent = title;
        document.getElementById('resultSubtitle').textContent = subtitle;
        lastResult = details || 'No additional details.';
        document.getElementById('resultDetails').textContent = lastResult;
        card.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
    }

    function copyResult() {
        navigator.clipboard.writeText(lastResult).then(() => showToast('‚úÖ', 'Result copied!'));
    }
    function shareResult() {
        const text = `I just tested an API key using MDH TESTER!\n${lastResult.substring(0, 100)}...\n\nTry it: ${SITE_URL}`;
        if (navigator.share) { navigator.share({ title: SITE_NAME, text, url: SITE_URL }); }
        else { navigator.clipboard.writeText(text).then(() => showToast('‚úÖ', 'Copied to clipboard!')); }
    }

    // ============== HISTORY ==============
    function addHistory(provider, masked, status, code) {
        testHistory.unshift({ id: Date.now(), provider: provider.name, icon: provider.icon, key: masked, status, code, time: new Date().toLocaleString() });
        if (testHistory.length > 100) testHistory = testHistory.slice(0, 100);
        localStorage.setItem('mdhTestHistory', JSON.stringify(testHistory));
        renderHistory();
    }

    function renderHistory() {
        const list = document.getElementById('historyList');
        const empty = document.getElementById('emptyHistory');
        list.innerHTML = '';
        if (testHistory.length === 0) { empty.classList.remove('hidden'); return; }
        empty.classList.add('hidden');
        const colors = { valid: 'text-green-400 bg-green-500/10', invalid: 'text-red-400 bg-red-500/10', ratelimit: 'text-yellow-400 bg-yellow-500/10', unknown: 'text-gray-400 bg-gray-500/10', error: 'text-red-400 bg-red-500/10' };
        const labels = { valid: 'Valid', invalid: 'Invalid', ratelimit: 'Rate Limit', unknown: 'Unknown', error: 'Error' };
        testHistory.forEach(h => {
            const div = document.createElement('div');
            div.className = 'bg-[rgba(15,15,28,0.9)] border border-white/5 rounded-xl p-3 hover:border-violet-500/20 transition-all';
            div.innerHTML = `
                <div class="flex items-center justify-between mb-1.5">
                    <div class="flex items-center gap-2"><span class="text-sm">${h.icon}</span><span class="text-xs font-semibold text-gray-300">${h.provider}</span></div>
                    <span class="text-[10px] px-2 py-0.5 rounded-full font-semibold ${colors[h.status] || colors.unknown}">${labels[h.status] || 'Unknown'}</span>
                </div>
                <div class="text-[11px] text-gray-600 mono">${h.key}</div>
                <div class="text-[10px] text-gray-700 mt-1">${h.time} ‚Ä¢ ${h.code}</div>`;
            list.appendChild(div);
        });
    }

    function toggleHistory() {
        const panel = document.getElementById('historyPanel');
        const overlay = document.getElementById('historyOverlay');
        const isOpen = panel.classList.contains('open');
        panel.classList.toggle('open', !isOpen);
        overlay.classList.toggle('active', !isOpen);
        document.body.style.overflow = isOpen ? '' : 'hidden';
    }

    function clearHistory() {
        testHistory = [];
        stats = { total: 0, valid: 0, invalid: 0 };
        localStorage.setItem('mdhTestHistory', '[]');
        localStorage.setItem('mdhTestStats', JSON.stringify(stats));
        renderHistory(); updateStats();
        showToast('üóëÔ∏è', 'History cleared');
    }

    function exportHistory() {
        if (testHistory.length === 0) { showToast('‚ö†Ô∏è', 'No history to export'); return; }
        const csv = 'Provider,Key,Status,Code,Time\n' + testHistory.map(h => `"${h.provider}","${h.key}","${h.status}","${h.code}","${h.time}"`).join('\n');
        const blob = new Blob([csv], { type: 'text/csv' });
        const a = document.createElement('a');
        a.href = URL.createObjectURL(blob);
        a.download = 'mdh-tester-history.csv';
        a.click();
        showToast('üì•', 'History exported as CSV');
    }

    function updateStats() {
        animateNum('totalTests', stats.total);
        animateNum('validCount', stats.valid);
        animateNum('invalidCount', stats.invalid);
    }

    function animateNum(id, target) {
        const el = document.getElementById(id);
        const current = parseInt(el.textContent) || 0;
        if (current === target) return;
        const diff = target - current;
        const steps = Math.min(Math.abs(diff), 20);
        const stepVal = diff / steps;
        let step = 0;
        const timer = setInterval(() => {
            step++;
            el.textContent = Math.round(current + stepVal * step);
            if (step >= steps) { el.textContent = target; clearInterval(timer); }
        }, 30);
    }

    // ============== SHARE ==============
    function openShare() { document.getElementById('shareModal').classList.add('active'); }
    function closeShare() { document.getElementById('shareModal').classList.remove('active'); }

    function copyShareLink() {
        navigator.clipboard.writeText(SITE_URL).then(() => {
            const btn = document.getElementById('copyLinkBtn');
            btn.textContent = 'Copied!';
            btn.classList.add('!bg-green-600');
            setTimeout(() => { btn.textContent = 'Copy'; btn.classList.remove('!bg-green-600'); }, 2000);
            showToast('‚úÖ', 'Link copied to clipboard!');
        });
    }

    function shareVia(platform) {
        const text = encodeURIComponent(SITE_DESC);
        const url = encodeURIComponent(SITE_URL);
        const title = encodeURIComponent(SITE_NAME);
        const urls = {
            twitter: `https://twitter.com/intent/tweet?text=${text}&url=${url}`,
            telegram: `https://t.me/share/url?url=${url}&text=${text}`,
            whatsapp: `https://wa.me/?text=${text}%20${url}`,
            linkedin: `https://www.linkedin.com/sharing/share-offsite/?url=${url}`,
            reddit: `https://www.reddit.com/submit?url=${decodeURIComponent(url)}&title=${title}`,
            email: `mailto:?subject=${title}&body=${text}%20${url}`,
        };
        if (urls[platform]) window.open(urls[platform], '_blank', 'width=600,height=500');
        closeShare();
    }

    // ============== TOAST ==============
    let toastTimer;
    function showToast(icon, msg) {
        const toast = document.getElementById('toast');
        document.getElementById('toastIcon').textContent = icon;
        document.getElementById('toastMsg').textContent = msg;
        toast.classList.add('show');
        clearTimeout(toastTimer);
        toastTimer = setTimeout(() => toast.classList.remove('show'), 3000);
    }

    // ============== START ==============
    init();
    </script>
</body>
</html>
